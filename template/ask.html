<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ollama Chat</title>
  </head>
  <body
    style="font-family: Arial, sans-serif; text-align: center; margin: 50px"
  >
    <h1>Chat with Dr.Caspian</h1>

    <textarea
      id="user-input"
      placeholder="Type your message..."
      style="
        padding: 10px;
        width: 60%;
        min-height: 30px;
        resize: none;
        overflow-y: hidden;
      "
      rows="1"
      oninput="this.style.height = ''; this.style.height = this.scrollHeight + 'px'"
    ></textarea>

    <button onclick="sendMessage()" style="padding: 10px">Send</utton>

    <h2>Response:</h2>
    <p
      id="response-area"
      style="
        border: 1px solid #ddd;
        padding: 10px;
        width: 60%;
        margin: auto;
        min-height: 50px;
      "
    ></p>

    <script>
      function sendMessage() {
        const userInput = document.getElementById("user-input").value;
        document.getElementById("response-area").textContent = "Thinking...";

        fetch("/ask", {
          method: "POST",
          headers: { "Content-Type": "text/plain" }, // Send plain text
          body: userInput,
        })
          .then((response) => response.text()) // Expect plain text response
          .then((data) => {
            document.getElementById("response-area").textContent = data;
          })
          .catch((error) => {
            document.getElementById("response-area").textContent =
              "Error: " + error;
          });
      }
    </script>
  </body>
</html>
